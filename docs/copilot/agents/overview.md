---
ContentId: 7c4b8b5e-2d3f-4e8a-9b2c-1a5d6f8e9c0b
DateApproved: 12/10/2025
MetaDescription: VS CodeにおけるAIエージェントのさまざまな種類（ローカル チャット、バックグラウンド エージェント、クラウド エージェントなど）について学び、コーディング タスクに活用する方法を紹介します。
MetaSocialImage: ../images/shared/github-copilot-social.png
Keywords:
- ai
- agents
- background agent
- cloud agent
- copilot coding agent
- copilot cli
---

# Visual Studio Codeでエージェントを使用する

エージェントは、AIを活用した自律的なコーディングを可能にし、単純なコード提案やチャットのやり取りを超える複数ステップのタスクを実行できるようにします。Visual Studio Codeでは、ローカルまたはクラウドで実行されるエージェント セッションを、対話的にもバックグラウンドでも作成できます。いつでも、異なるエージェントの種類の間でタスクをハンドオフして、それぞれの強みを活用できます。VS Codeの統合されたチャット ビューを使うと、実行場所に関係なく、すべてのエージェント セッションを管理および監視するための中心的な場所を確保できます。

この記事では、さまざまなエージェントの種類、エージェント セッションの作成と管理方法、エージェント間でタスクを委任する方法、そして進捗を追跡する方法の概要を説明します。

![VS Codeのエージェント セッションのスクリーンショット。コード変更とチャットのやり取りが表示されている。](../images/agents-overview/chat-sessions-view.png)

## エージェントとは

エージェントは、コーディング タスク全体をエンドツーエンドで処理します。コードを提案したり質問に答えたりするだけではなく、より多くの作業を行うことで時間を節約できます。エージェントはプロジェクトを理解し、複数のファイルにまたがって変更を加え、コマンドを実行し、得られた結果に基づいて適応します。

たとえば、テストが失敗している状況を想像してください。単に修正案を提案するだけでなく、エージェントはエラー メッセージを読み取り、複数のファイルにまたがる根本原因を特定し、関連するコードを更新し、修正が機能することを検証するためにテストを再実行し、さらには変更をコミットすることもできます。

エージェントに高レベルのタスクを与えると、エージェントはそれを手順に分解し、さまざまなツールを使ってそれらの手順を実行し、エラーや失敗したテストに遭遇したときは自己修正します。

VS Codeでは、ワークフローに合わせて異なる環境でエージェントを実行できます。対話的なタスクにはVS Code内のローカルで、自律的な作業にはマシン上のバックグラウンドで、チーム コラボレーションにはクラウド上でリモート実行できます。エージェントはコーディング タスクを実行し、ターミナル コマンドを実行し、ツールを組み合わせて目的を達成します。プロンプトにリアルタイムで応答して機能の計画や狙いを定めた編集を支援するエージェントもいれば、独立して作業し、複数ステップの変更を実装するエージェントもいます。

<details>
<summary>エージェントはカスタム エージェントとどう違うのですか?</summary>

カスタム エージェントを使うと、コード レビュアー、テスター、セキュリティ エキスパートなど、タスクに応じた特定の役割やペルソナをエージェントに担わせることができます。カスタム エージェントは、エージェントがどのように振る舞うべきか、どのツールを使用できるか、どのモデルを使用すべきかを定義する構成です。

たとえば、"Code Reviewer"カスタム エージェントは、潜在的なバグの特定と、チームのコーディング標準や業界のベスト プラクティスに基づく改善提案に重点を置くように構成できます。このカスタム エージェントはコードベースへの読み取り専用アクセスのみを持ち、レビューのコンテキストとして特定のリポジトリやドキュメントを使用します。カスタム エージェントの成果物は、テンプレートに基づいた詳細なコード レビュー レポートになります。

カスタム エージェントは異なるエージェントの種類（ローカル、バックグラウンド、クラウド）間で再利用でき、異なる環境でも同じ役割やペルソナを担わせることができます。

カスタム エージェントでは、カスタム エージェント定義の中でハンドオフを指定して、ユーザーが別のエージェントでフォローアップ アクションを実行できる構造化されたワークフローを実装することもできます。たとえば、"Code Reviewer"カスタム エージェントを、組み込みエージェントにハンドオフして提案された変更の実装を依頼するように構成できます。

[カスタム エージェントの作成](/docs/copilot/customization/custom-agents.md)の詳細をご覧ください。

</details>

<details>
<summary>エージェントはサブエージェントとどう違うのですか?</summary>

サブエージェントを使うと、エージェントは複雑なタスクを分解し、分離されたコンテキストで実行できます。サブエージェントは、エージェント セッションの一部として開始されますが、独立して動作し、独自のコンテキスト ウィンドウを持つ自律的なエージェントです。サブエージェントは、調査や分析のような複雑な複数ステップのタスクにおけるコンテキスト管理を最適化するのに役立ちます。エージェントは、1つのユーザー要求の異なる部分を処理するために複数のサブエージェントを作成できます。

たとえば、あるトピックを調査して結果を要約するようにエージェントに依頼した場合、調査パートを担当するサブエージェントを作成できます。サブエージェントは情報を収集して処理し、最終的な要約だけをメイン エージェントに返すことで、メインのコンテキストを主な会話に集中させます。

エージェントそのものと同様に、サブエージェントもカスタム エージェントを活用して、タスクに応じた特定の役割やペルソナを担うことができます。サブエージェントが調査を行う必要がある場合、情報の収集、分析、要約に最適化された"Researcher"カスタム エージェントを使用させることができます。

サブエージェントは現在、VS Codeのローカル エージェント セッションでのみサポートされています。

</details>

## エージェントの種類

VS Codeは4つの主要なカテゴリのエージェントをサポートしており、それぞれが異なるユース ケースと対話レベル向けに設計されています。

![環境と対話によるエージェントの種類を示す図。](../images/agents-overview/agent-types-diagram-v2.png)

<!-- Diagram source: agent-types.excalidraw (credits: AnnaS) -->

### ローカル エージェント

ローカル エージェントは、マシン上のVS Code内で直接実行されます。チャットを介してローカル エージェントと対話し、プロンプトに対する即時の結果を得られます。ローカル エージェントはワークスペース上で動作し、VS Codeで利用可能なツールとモデルの全範囲にアクセスできます。[カスタム エージェントの作成](/docs/copilot/customization/custom-agents.md)により、コード レビュアー、テスター、ドキュメント ライターなど、タスクに応じた特定の役割やペルソナをエージェントに担わせることができます。

ローカル エージェントは、VS Codeのチャット インターフェイスで動作します。チャット セッションを閉じてもローカル エージェントはアクティブなままで、セッション ビューで追跡できます。

**最適な用途**:

* ブレインストーミング、計画、まだ十分に定義されていないタスクなど、即時のフィードバックが必要な対話
* 他のチーム メンバーとのコラボレーションを必要としないタスク
* リント エラー、スタック トレース、単体テスト結果など、開発者環境のコンテキストが必要なタスク
* VS Code拡張機能やMCPサーバーの特定ツールへのアクセスが必要、またはBYOKモデルのような特定のモデルを使用する必要があるタスク

**主な特徴**:

* ローカル マシン上のVS Code内で実行され、現在のワークスペースで動作する
* リアルタイムのフィードバックと反復のための対話的なチャット ベース インターフェイス
* ワークスペース、ファイル、コンテキストへのフル アクセス
* 組み込みツール、MCPツール、拡張機能が提供するツールなど、VS Codeで構成されたすべてのエージェント ツールにアクセスできる
* BYOKモデルや他のプロバイダーのモデルを含め、VS Codeで利用できるすべてのモデルを使用できる

[VS Codeでチャットを使用する](/docs/copilot/chat/copilot-chat.md)の詳細をご覧ください。

### バックグラウンド エージェント

Copilot CLIなどのバックグラウンド エージェントは、ローカル マシン上でバックグラウンドで非対話的に実行されるCLIベースのエージェントです。バックグラウンド エージェントは、Git worktreeを使用して分離モードで動作し、コード変更が現在のワークスペースに干渉しないようにできます。バックグラウンド エージェントを現在のワークスペースで実行することもできますが、同じファイルを積極的に作業している場合は競合が発生する可能性があります。バックグラウンド エージェントはMCPや拡張機能が提供するツールを使用できず、CLIが提供するモデルに制限されます。バックグラウンド エージェントの動作をカスタマイズするには、ワークスペースの[カスタム エージェント](/docs/copilot/customization/custom-agents.md)を再利用して、特定の役割やペルソナを担わせることができます。

**最適な用途**:

* 計画の実装など、スコープが明確で必要なコンテキストがすべて揃っている非対話的なタスク
* 他のチーム メンバーとのコラボレーションを必要としないタスク
* 失敗したテストやテキスト選択など、VS Codeの組み込みツール、MCPツール、または実行時コンテキストへのアクセスを必要としないタスク

**主な特徴**:

* ローカル マシン上でバックグラウンドで非対話的かつ自律的に実行される
* Git worktreeを使用してメインのワークスペースから分離して作業できる
* 明示的に追加しない限り、VS Codeの組み込みツールや実行時コンテキストに直接アクセスできない
* MCPサーバーにアクセスできない
* CLIツール経由で利用できるモデルに制限される

[VS Codeでバックグラウンド エージェントを使用する](/docs/copilot/agents/background-agents.md)の詳細をご覧ください。

### クラウド エージェント

クラウド エージェントは、AIを活用したコーディング タスクを実行するためにリモート インフラストラクチャ上で動作します。Copilot coding agentなどのクラウド エージェントは、GitHubリポジトリとプル リクエストに統合され、チーム コラボレーションとコード レビューを可能にします。クラウド エージェントは、干渉を防ぐためにブランチとプル リクエストを介してローカル ワークスペースから分離して動作します。クラウド エージェントはVS Codeの組み込みツールや実行時コンテキストにはアクセスできませんが、リモート環境で構成されたMCPサーバーにはアクセスできます。ワークスペースの[カスタム エージェント](/docs/copilot/customization/custom-agents.md)を再利用して、タスクに応じた特定の役割やペルソナをクラウド エージェントに担わせることができます。

**最適な用途**:

* 計画の実装など、スコープが明確で必要なコンテキストがすべて揃っている非対話的なタスク
* 他のチーム メンバーとのコラボレーションが必要なタスク
* 失敗したテストやテキスト選択など、VS Codeの組み込みツール、MCPツール、または実行時コンテキストへのアクセスを必要としないタスク

**主な特徴**:

* リモート インフラストラクチャ上で非対話的に実行される
* ブランチとプル リクエストを介してメインのワークスペースから分離して作業する
* プル リクエストを介してチーム コラボレーションをサポートできる
* VS Codeの組み込みツールや実行時コンテキストにアクセスできない
* リモート環境で構成されたMCPサーバーにアクセスできる
* クラウド エージェント サービスで利用できるモデルに制限される

[VS Codeでクラウド エージェントを使用する](/docs/copilot/agents/cloud-agents.md)の詳細をご覧ください。

### サード パーティ エージェント

サード パーティ エージェントは、OpenAI Codexなどの他のプロバイダーによって開発されたバックグラウンド エージェントで、VS Codeのエージェント エクスペリエンスに統合されています。これらのプロバイダーのエージェント セッションは、ローカル、バックグラウンド、クラウド エージェントと同じ方法で管理できます。

**最適な用途**: 既にサード パーティのAIエージェントを使用しており、それらをVS Codeのワークフローに統合したい場合

## エージェント セッションを管理する

VS Codeのチャット ビューは、実行場所に関係なくエージェント セッションを管理するための統合インターフェイスを提供します。すべてのエージェント セッションの一覧、状態、ファイル変更などの主な詳細、および種類（ローカル、バックグラウンド、クラウド、またはCodex）を確認できます。状態インジケーターにより、アクティブ、完了、失敗、または入力が必要なセッションをすばやく識別できます。

セッションの一覧はワークスペースにスコープされます。ワークスペースを開いていない場合、一覧にはワークスペース全体のすべてのセッションが表示されます。

チャット ビューは、コンパクトと横並びの2つのモードで動作します。チャット ビューの右上にある切り替えコントロールで、コンパクトと横並びモードを手動で切り替えできます。

* **コンパクト**:

    コンパクト ビューでは、新しいチャット セッションを開くと、直近3つのセッションがコンパクトな一覧で表示されます。**すべてのセッションを表示**を選択すると、エージェント セッションの全履歴を開けます。すべてのセッションを表示しているときは、検索とフィルターのオプションを使用して特定のセッションを見つけます。

    ![最近のエージェント セッションが表示されたコンパクト モードのチャット ビューのスクリーンショット。](../images/agents-overview/chat-view-compact.png)

    一覧からセッションを選択すると、チャット ビューはそのセッションに切り替わります。リンクを使って前のビューに戻れます。

* **横並び**

    横並びビューでは、チャット ビューにエージェント セッションの全一覧がチャット ビューの横に並んで表示されます。検索とフィルターのオプションを使って特定のセッションを見つけます。

    ![エージェント セッションの全履歴が表示された拡張モードのチャット ビューのスクリーンショット。](../images/agents-overview/chat-view-expanded.png)

    一覧からセッションを選択すると、セッション一覧は表示されたまま、チャット ビューにそのセッションの詳細が表示されます。

    > [!TIP]
    > チャット ビューを広くすると、自動的に横並びモードに切り替わります。セッション一覧を右クリックして**セッションの方向**を選択し、既定の動作（`setting(chat.viewSessions.orientation)`）を変更するか、切り替えボタンを使用します。

一覧内のセッションを右クリックすると、セッションの詳細を開くためのさまざまなオプション、セッションのアーカイブ、またはプル リクエストのチェックアウト（クラウド エージェント セッションの場合）などのエージェントの種類に固有のアクションといった、追加のアクションを確認できます。

チャット ビューからセッション一覧を非表示にするには、空のチャットを右クリックし、**セッションを表示**の選択を解除します。

専用のエージェント ビュー（プレビュー）を使用したい場合は、`setting(chat.agentSessionsViewLocation)`設定を`view`または`single-view`に設定します。

> [!NOTE]
> 拡張機能の開発者は、提案中のAPI[`chatSessionsProvider`](https://github.com/microsoft/vscode/blob/main/src/vscode-dts/vscode.proposed.chatSessionsProvider.d.ts)を使用してエージェント ビューと統合する方法を学べます。このAPIは現在提案段階にあり、変更される可能性があります。

### エージェント セッションをフィルターする

セッション一覧にすべてのセッションが表示されているとき、検索とフィルタリングを使用して特定のエージェント セッションを見つけられます。既定では、[アーカイブされたセッション](#archive-agent-sessions)を除き、すべてのセッションが表示されます。エージェントの種類、状態、既読状態、アーカイブ状態でセッションをフィルターできます。

![エージェント セッション ビューのフィルター ドロップダウンのスクリーンショット。](../images/agents-overview/agent-sessions-filter.png)

**リセット**を選択すると、フィルターを既定値にリセットします。

### エージェント セッションをアーカイブする

セッション一覧を整理するために、完了したセッションや非アクティブなセッションをアーカイブできます。アーカイブされたセッションは既定で非表示になりますが、**アーカイブ済み**フィルターを適用してアクセスできます。

セッションをアーカイブするには、セッション一覧でセッションにマウスオーバーし、**アーカイブ**を選択します。セッションをアーカイブすると一覧から消えます。逆に、同じ方法でセッションのアーカイブを解除することもできます。

![セッション ビューでエージェント セッションをアーカイブするスクリーンショット。](../images/agents-overview/agent-sessions-archive.png)

## エージェント セッションを作成する

VS Codeで新しいエージェント セッションを作成する方法はいくつかあります。

* 特定の種類の新しい空のエージェント セッションを作成する

* 委任を介して既存のセッションを別のエージェントの種類にハンドオフする

* TODOコメントやGitHub issueなどのタスクをエージェントに直接割り当てる

### 新しいエージェント セッションを作成する

チャット ビューから、またはコマンド パレット内の対応するコマンドを使用して、新しいエージェント セッションを作成できます。

1. チャット ビューを開く

1. **新しいセッション**ドロップダウンを選択し、作成するエージェント セッションの種類を選択する

    ![チャット ビューから新しいエージェント セッションを作成しているスクリーンショット。](../images/agents-overview/create-new-agent-session.png)

    * **新しいチャット**: チャット ビューで新しいローカル エージェント セッションを開始する
    * **新しいチャット エディター**: エディター タブとして新しいローカル エージェント セッションを開始する
    * **新しいチャット ウィンドウ**: 別のVS Codeウィンドウで新しいローカル エージェント セッションを開始する
    * **新しいバックグラウンド/クラウド/Codex エージェント**: チャット ビューで新しいバックグラウンド、クラウド、またはCodexのエージェント セッションを開始する

いつでも、オーバーフロー メニュー（...）内のアクションを使用して、エージェント セッションをチャット ビューからチャット エディターまたは新しいウィンドウに移動できます。

または、コマンド パレット（`kb(workbench.action.showCommands)`）から次のコマンドを使用します。

* **チャット: 新しいチャット エディター/ウィンドウ**: チャット エディターで新しいローカル エージェント セッションを開始する
* **チャット: 新しいバックグラウンド エージェント**: チャット エディターでCopilot CLIを使用して新しいバックグラウンド エージェント セッションを開始する
* **チャット: 新しいクラウド エージェント**: チャット エディターで新しいCopilot coding agentセッションを開始する
* **Codex: 新しいCodex エージェント**: チャット エディターで新しいOpenAI Codexエージェント セッションを開始する

### セッションを別のエージェントにハンドオフする

各エージェントの種類には固有の強みと機能があります。ローカル エージェントではAIとリアルタイムで対話でき、バックグラウンド エージェントはスコープが明確なタスクを自律的に処理するのに優れており、クラウド エージェントはプル リクエストを介したチーム コラボレーションに優れています。

VS Codeでは、手元のタスクの内容に応じて、既存のタスクをあるエージェントから別のエージェントにハンドオフ（または委任）できます。たとえば、ローカル エージェントで計画を作成してから、バックグラウンド エージェントにハンドオフして概念実証として異なるバリアントを作成し、最後にクラウド エージェントで続行してチーム レビュー用のプル リクエストで最終バージョンを実装するといった流れです。

セッションを委任すると、VS Codeは選択した種類の新しいエージェント セッションを作成し、会話履歴とコンテキスト全体を引き継ぎます。その後、新しいエージェントとの対話を続けてタスクを完了できます。元のセッションはハンドオフ後にアーカイブされます。

**続行先**コントロールを使用するか、プロンプトに`@cli`、`@cloud`、または`@codex`を入力してタスクを別のエージェントの種類に渡すことで、VS Codeのチャットからローカル エージェント セッションをハンドオフできます。

![続行先ボタンが表示されたチャット入力ボックスのスクリーンショット。](../images/agents-overview/delegate-local-session.png)

バックグラウンド エージェント セッションでは、チャット入力ボックスで`/delegate`コマンドを入力してクラウド エージェントに委任できます。必要に応じて、`/delegate`コマンドの後にクラウド エージェントへの追加の指示を指定できます。

### コーディング タスクをエージェントに割り当てる

[GitHub Pull Requests](https://marketplace.visualstudio.com/items?itemName=GitHub.vscode-pull-request-github)拡張機能がインストールされている場合、コード内の`TODO`コメントを実装するようにエージェントを割り当てられます。

![Copilot coding agentにTODOコメントを割り当てているスクリーンショット。](../images/agents-overview/assign-todo-to-agent.png)

GitHub.comまたはGitHub Pull Requests拡張機能を使用して、issueを`copilot`に割り当てるか、issueコメントまたはプル リクエストでメンションしてコード レビューを依頼することで、GitHub issueをCopilot coding agentに割り当てられます。

## ファイル変更を確認して適用する

エージェント セッションが完了してプロジェクトにコード変更が加えられると、セッション一覧にそのセッションのファイル変更の統計が表示されます。エージェントによる変更を確認するには、一覧からセッションを選択してセッションの詳細を開きます。

セッション詳細ビューには、エージェントとの会話履歴全体と、セッション中に行われたファイル変更が表示されます。変更されたファイルを右クリックすると、そのファイルの差分エディターを表示できます。または、**すべての変更を表示**アクションを選択すると、セッション中に行われたすべての変更を含む複数ファイルの差分エディターを表示できます。

![エージェント セッションにおけるファイル変更の差分エディターのスクリーンショット。](../images/agents-overview/agent-file-changes.png)

エージェントの種類によっては、エージェントが行った変更をローカル ワークスペースに適用する、またはエージェント セッションからブランチをチェックアウトする（クラウド エージェントの場合）ための追加オプションがあります。

## 関連リソース

* [エージェントのチュートリアル](/docs/copilot/agents/agents-tutorial.md): 異なるエージェントの種類を扱うための実践的なチュートリアル

* [ローカル エージェント](/docs/copilot/chat/copilot-chat.md): ローカル エージェント セッションとチャット機能を習得する

* [バックグラウンド エージェント](/docs/copilot/agents/background-agents.md): CLIベースのエージェントと自律的なワークフローを探索する

* [クラウド エージェント](/docs/copilot/agents/cloud-agents.md): GitHub Copilot Coding Agentとリモート実行について学ぶ

* [カスタム エージェント](/docs/copilot/customization/custom-agents.md): 独自のAIエージェントと拡張機能を作成する
