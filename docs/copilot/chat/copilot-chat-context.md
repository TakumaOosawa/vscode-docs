---
ContentId: 5d8a707d-a239-4cc7-92ee-ccc763e8eb9c
DateApproved: 12/10/2025
MetaDescription: "VS CodeでAIを使用する際のコンテキストの管理方法(ワークスペースのインデックス作成、ファイルやシンボルの#-メンション、Webコンテンツの参照、カスタム指示など)を学びます。"
MetaSocialImage: ../images/shared/github-copilot-social.png
---
# AIのコンテキストを管理する

適切なコンテキストを提供すると、VS CodeのAIからより関連性が高く正確な回答を得られます。この記事では、チャットでコンテキストを管理する方法として、#-メンションを使ってファイル、フォルダー、シンボルを参照する方法、Webコンテンツを参照する方法、またはカスタム指示を使ってAIの応答をガイドする方法を説明します。

## ワークスペースのインデックス作成

VS Codeはインデックスを使用して、コードベースから関連するコードスニペットを迅速かつ正確に検索します。このインデックスはGitHubによって管理されるか、ローカル(あなたのマシン)に保存されます。

次のワークスペースのインデックス作成オプションを利用できます:

* **リモートインデックス**:コードがGitHubリポジトリにホストされている場合、(大規模なコードベースであっても)コードベースをすばやく検索できるリモートインデックスを作成できます。
* **ローカルインデックス**:ローカルマシンに保存される高度なセマンティックインデックスを使用して、コードベースに対して高速かつ正確な検索結果を提供します。
* **基本インデックス**:ローカルインデックス作成が利用できない場合、より大規模なコードベースに対してローカルで動作するよう最適化された、よりシンプルなアルゴリズムを使用できます。

[ワークスペースのインデックス作成](/docs/copilot/reference/workspace-context.md)の詳細を確認してください。

## 暗黙のコンテキスト

VS Codeは現在の操作に基づいて、チャットプロンプトにコンテキストを自動的に提供します。次の情報は暗黙的にチャットのコンテキストに含まれます:

* アクティブなエディターで現在選択されているテキスト。
* アクティブなエディターのファイル名またはノートブック名。
* AskまたはEditを使用している場合、アクティブなファイルがコンテキストとして自動的に含まれます。
* エージェントを使用している場合、プロンプトに基づいてアクティブなファイルをチャットコンテキストに追加する必要があるかどうかを、エージェントが自律的に判断します。

![チャットビューのスクリーンショット。チャット入力ボックスで、アクティブなファイルが推奨されるコンテキスト項目として表示されている。](./images/copilot-chat/chat-context-current-file.png)

## #-メンション

`#`に続けてメンションしたいコンテキスト項目を入力すると、プロンプトに明示的にコンテキストを追加できます。VS Codeは、ファイル、フォルダー、コードシンボル、ツール、ターミナル出力、ソース管理の変更など、さまざまな種類のコンテキスト項目をサポートしています。

チャット入力欄で`#`記号を入力すると利用可能なコンテキスト項目の一覧が表示されます。または、チャットビューで**Add Context**を選択してコンテキストピッカーを開きます。

![VS Codeのチャットビューのスクリーンショット。チャット変数ピッカーが表示されている。](./images/copilot-chat/copilot-chat-view-chat-variables.png)

[サポートされているコンテキスト項目](/docs/copilot/reference/copilot-vscode-features.md#chat-tools)の完全な一覧を確認してください。

### ファイルをコンテキストとして追加する

特定のファイル、フォルダー、またはシンボルをコンテキストとして提供するには、次の方法でチャットに追加します:

* チャットメッセージ内で、`#`に続けてファイル、フォルダー、またはシンボルの名前を入力し、#-メンションします。
    シンボルを参照するには、まずそのシンボルを含むファイルをエディターで開いてください。

* エクスプローラービュー、検索ビュー、またはエディタータブからファイルやフォルダーをチャットビューへドラッグ&ドロップして、コンテキストとして追加します。

* チャットビューで**Add Context**を選択し、Quick Pickから**Files & Folders**または**Symbols**を選択します。

> [!NOTE]
> 可能であれば、ファイルを添付するとそのファイルの全内容が含まれます。コンテキストウィンドウに収まらないほど大きい場合は、実装を含まない関数とその説明を含むファイルのアウトラインが含まれます。アウトラインも大きすぎる場合、そのファイルはプロンプトに含まれません。

### コードベース検索を実行する

個々のファイルを手動で追加する代わりに、VS Codeにコードベースから適切なファイルを自動的に見つけさせることができます。どのファイルが質問に関連しているのかわからない場合に便利です。

プロンプトに`#codebase`を追加するか、**Add Context**>**Tools**>**codebase**を選択して、ワークスペースのコード検索を有効にします。

次のプロンプト例は、コードベース検索の使用方法を示しています:

* `"#codebaseで認証がどのように動作するか説明して"`
* `"データベースの接続文字列はどこで設定されていますか?#codebase"`
* `"住所を更新するための新しいAPIルートを追加して#codebase"`

[エージェント](/docs/copilot/chat/copilot-chat.md#built-in-agents)を使用している場合、質問に答えるために追加のコンテキストが必要だと判断すると、エージェントが自動的にコードベース検索を使用します。質問が複数の解釈をされうる場合や、エージェントが確実にコードベース検索を使用するようにしたい場合は、`#codebase`を追加することもできます。

### Webのコンテンツを参照する

チャットプロンプトでWebのコンテンツを参照できます(例:最新のAPIリファレンスやコード例を取得する)。

* `#fetch <URL>`

    `fetch`ツールを使用して、特定のWebページからコンテンツを取得します。このツールを使用するには、`#fetch`に続けて参照したいページのURLを入力します。

    `fetch`ツールは、パフォーマンス向上のためにWebページのコンテンツを一定時間キャッシュします。ページの内容が変わった場合は、VS Codeを再起動して強制的に更新できます。ページに到達できない場合、キャッシュは短時間(約5分)で期限切れになります。

    VS Codeは、プライバシーとセキュリティを保護するため、外部URLへアクセスする前に確認を求めます。[URLの自動承認の構成](/docs/copilot/chat/chat-tools.md#url-approval)の詳細を確認してください。

    `fetch`ツールを使用するプロンプト例:

    * `"VS Code1.100の主な変更点は?#fetch https://code.visualstudio.com/updates/v1_100"`
    * `"asp.netアプリを.net 9に更新して#fetch https://learn.microsoft.com/en-us/aspnet/core/migration/80-90"`

* `#githubRepo <repo name>`

    `githubRepo`ツールを使用してGitHubリポジトリ内でコード検索を行います。`#githubRepo`に続けてリポジトリ名を入力します。

    `githubRepo`ツールを使用するプロンプト例:

    * `"next.jsのルーティングはどのように動作しますか?#githubRepo vercel/next.js"`
    * `"#githubRepo microsoft/typescriptと一貫しているか検証するためにコードレビューを実施して"`

### Reference tools

エージェントを使用している場合、特定のタスクを実行するためにツールを使用するかどうかをエージェントが自律的に判断します。チャットプロンプトでツールを明示的に参照したい場合は#-メンションを使用できます。`#`に続けてツール名と任意のパラメーターを入力します:

* `"要約して#fetch https://code.visualstudio.com/updates"`
* `"ルーティングはどのように動作しますか?#githubRepo vercel/next.js"`
* `"自分の未解決issueは何ですか#github-mcp"`(GitHub MCPサーバーのツールを使用)

ツールセットまたはMCPサーバーを名前で参照すると、そのセットまたはサーバーのすべてのツールが現在のプロンプトでエージェントに利用可能になります。

[チャットでツールを追加して使用する](/docs/copilot/chat/chat-tools.md)の詳細を確認してください。

## @-メンション

チャット参加者は、チャットでドメイン固有の質問をできるようにする専門アシスタントです。チャット参加者は、チャットの依頼を引き継いで残りを処理するドメインエキスパートだと考えてください。

チャット参加者は、エージェントフローの一部として呼び出され、特定のタスクに貢献して実行する[ツール](#reference-tools)とは異なります。

チャット参加者は@-メンションで呼び出せます。`@`に続けて参加者名を入力します。VS Codeには`@vscode`、`@terminal`、`@workspace`などの組み込みチャット参加者がいくつか用意されています。これらは、それぞれのドメインに関する質問に答えるよう最適化されています。

次の例は、チャットプロンプトで@-メンションを使用する方法を示しています:

* `"@vscodeワードラップを有効にする方法"`
* `"@terminal現在のディレクトリで最も大きいファイル上位5つは?"`

チャット入力欄で`@`を入力すると利用可能なチャット参加者の一覧が表示されます。

拡張機能は独自の[チャット参加者](/api/extension-guides/ai/chat.md)を提供することもできます。

## ビジョン

チャットはビジョン機能をサポートしています。つまり、チャットプロンプトにコンテキストとして画像を添付し、それについて質問できます。たとえば、コードブロックのスクリーンショットを添付して説明を求めたり、UIのスケッチを添付してエージェントに実装を依頼したりできます。

> [!TIP]
> Webブラウザーから画像をチャットビューへドラッグ&ドロップして、コンテキストとして追加できます。

## ブラウザー要素を追加する(実験的)

VS Codeには組み込みブラウザーがあり、VS Code内でWebページをプレビューして操作できます(例:Webアプリケーションの簡単なテストやデバッグ)。

Simple Browserウィンドウの要素をチャットプロンプトのコンテキストとして追加できます。これは、HTML要素、CSSスタイル、JavaScriptコードなど、Webページの特定の部分について支援を得たい場合に便利です。

Simple Browserから要素をチャットプロンプトへ追加するには:

1. `setting(chat.sendElementsToChat.enabled)`設定で、Simple Browserからの選択を有効にします。
1. Webアプリケーションを起動します。
1. コマンドパレットから**Simple Browser: Show**コマンドを実行して、Simple Browserビューを開きます。
1. **Start**ボタンを選択して、現在のページから要素の選択を開始します。
1. Webページの要素にカーソルを合わせ、クリックしてチャットプロンプトに追加します。

    <video src="images/copilot-chat/simple-browser-select-element.mp4" title="Simple Browserから要素をチャットプロンプトに追加" autoplay loop controls muted></video>

    選択した要素が、現在のチャットプロンプトのコンテキストとして追加されることに注意してください。

コンテキストに含める情報を構成できます:

* CSSを添付:`setting(chat.sendElementsToChat.attachCSS)`設定で有効化します。
* 画像を添付:`setting(chat.sendElementsToChat.attachImages)`設定で有効化します。

> [!TIP]
> この機能は[Live Preview](https://marketplace.visualstudio.com/items?itemName=ms-vscode.live-server)拡張機能(プレリリース)でも利用できます。
