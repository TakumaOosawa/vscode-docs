---
ContentId: 7a2e5f8d-4c9b-41e6-b3a8-9d7f2e4c1b8a
DateApproved: 12/10/2025
MetaDescription: Visual Studio Codeでチャットセッションを作成および管理する方法(エディタータブや別ウィンドウでのチャットの表示、チャットセッション履歴の使用を含む)を学びます。
MetaSocialImage: ../images/shared/github-copilot-social.png
---
# VS Codeでチャットセッションを管理する

Visual Studio Codeのチャットを使うと、会話形式でAIとやり取りできます。チャットセッションは、あなたとAIの間のプロンプトと応答の一連の流れに加え、コードやファイルから取得された関連コンテキストで構成されます。この記事では、チャットセッションの作成と管理、チャットセッションのエクスポート、チャットセッション履歴の表示方法について説明します。

## チャットセッションとは

チャットセッションとは、単一の会話の中でAIとやり取りした履歴のことで、その会話で使用されたすべてのプロンプト、応答、コンテキストが含まれます。各チャットセッションは独自の履歴を保持するため、以前のやり取りをもとにフォローアップの質問をしたり、依頼内容を調整したりできます。

AIとやり取りするにつれて、チャットセッションにはプロンプトと応答からのコンテキスト(コンテキストウィンドウ)が蓄積されます。新しいチャットセッションを作成すると、以前の会話履歴はクリアされ、新しいセッション用に新しいコンテキストウィンドウが確立されます。

チェックポイントを使用すると、チャットセッション内で以前の状態にロールバックしたり、以前のプロンプトを編集して会話の流れを変更したりできます。詳しくは、[チェックポイントとチャットリクエストの編集](/docs/copilot/chat/chat-checkpoints.md)をご覧ください。

複数のチャットセッションを作成して、トピックやタスクごとに会話を整理できます。各セッションは独立しているため、あるセッションのコンテキストが別のセッションに引き継がれることはありません。VS Codeは[チャットセッションの履歴](#chat-session-history)を保持しており、いつでも以前の会話に戻れます。

エージェントを使用している場合、セッションはローカル(あなたのマシン上)、CLIを使用したバックグラウンド、またはクラウドで実行できます。[エージェント](/docs/copilot/agents/overview.md)の詳細をご覧ください。

> [!TIP]
> トピックを切り替えたいときは、新しいチャットセッションを開始すると、AIがより関連性の高い応答を返しやすくなります。

## 新しいチャットセッションを開始する

VS Codeは、チャットセッションに対して異なる種類のセッション(ローカル、バックグラウンド、クラウド)と、異なるビュー(サイドバー、エディタータブ、別ウィンドウ)をサポートしています。[バックグラウンドおよびクラウドエージェントセッション](/docs/copilot/agents/overview.md)の詳細をご覧ください。

| | |
|-|-|
| サイドバーでローカルチャットセッションを開く。<br/><br/><ul><li>Chat viewで、**New Chat (+)** > **New Chat**</li><li>`kb(workbench.action.chat.newChat)`</li><li>**Chat: New Chat**コマンド</li></ul> | ![VS CodeのChat viewで新しいチャットセッションを開いているスクリーンショット。](../images/chat-sessions/new-chat-session-chat-view.png) |
| ローカルチャットをエディタータブとして開く。<br/><br/><ul><li>Chat viewで、**New Chat (+)** > **New Chat Editor**</li><li>**Chat: New Chat Editor**コマンド</li></ul>| ![VS Codeのエディタータブで新しいチャットセッションを開いているスクリーンショット。](../images/chat-sessions/new-chat-session-editor-tab.png) |
| ローカルチャットを別ウィンドウで開く。<br/><br/><ul><li>Chat viewで、**New Chat (+)** > **New Chat Window**</li><li>`kb(workbench.action.chat.newChat)`</li><li>**Chat: New Chat Window**コマンド</li></ul> | ![VS Codeで別ウィンドウとして新しいチャットセッションを開いているスクリーンショット。](../images/chat-sessions/new-chat-session-separate-window.png) |
| バックグラウンドエージェントセッションを開く。<br/><br/><ul><li>Chat viewで、**New Chat (+)** > **New Background Agent**</li><li>**Chat: New Background Agent**コマンド</li></ul> | ![VS CodeのChat viewで新しいバックグラウンドエージェントセッションを開いているスクリーンショット。](../images/chat-sessions/new-background-agent-session.png) |
| クラウドエージェントセッションを開く。<br/><br/><ul><li>Chat viewで、**New Chat (+)** > **New Cloud Agent**</li><li>**Chat: New Cloud Agent**コマンド</li></ul> | ![VS CodeのChat viewで新しいクラウドエージェントセッションを開いているスクリーンショット。](../images/chat-sessions/new-cloud-agent-session.png) |

### チャットセッションを別のビューに移動する

既存のチャットセッションは、Chat viewからエディタータブや別ウィンドウなど、別のビューに移動できます。これは、チャットセッションとのやり取り方法を変えたい場合や、ワークスペースの整理方法を変えたい場合に便利です。

* Chat viewで`...`アイコンを選択し、**Move Chat into Editor Area**または**Move Chat into New Window**を選択します。

* チャットエディターで、エディタータブの右上にある`...`アイコンを選択し、**Move Chat into Secondary Side Bar**を選択します。

* チャットウィンドウで、ウィンドウのタイトルバーにある**Move Chat into Secondary Side Bar**ボタンを選択します。

* コマンドパレットから次のコマンドを使用します。

    * **Chat: Move Chat into Editor Area**

    * **Chat: Move Chat into New Window**

    * **Chat: Move Chat into Side Bar**

## チャットセッション履歴

新しいチャットセッションを作成すると、以前の会話履歴はクリアされます。ただし、すべてのチャットセッションはセッション履歴に保存されるため、以前の会話に戻って中断したところから続けられます。これは、過去のやり取りを確認したい場合、以前の応答を参照したい場合、または以前のセッションから会話を再開したい場合に便利です。

![VS Codeのエージェントセッションで、コード変更とチャットのやり取りが表示されているスクリーンショット。](../images/agents-overview/chat-sessions-view.png)

既定では、新しいチャットセッションを開始すると、Chat viewにはローカル、バックグラウンド、クラウドのいずれで実行されているかにかかわらず、最近のセッションが表示されます。**Show All Sessions**を選択すると、セッション履歴全体を表示でき、一覧を検索したりフィルターしたりできます。この一覧は現在のワークスペースにスコープされています。ワークスペースを開いていない場合は、ワークスペース全体にわたるすべてのセッションが表示されます。

エージェントと[エージェントセッションの表示と管理](/docs/copilot/agents/overview.md)の詳細をご覧ください。

> [!TIP]
> Chat viewを広くすると自動的に横並びモードに切り替わります。または、Chat viewの右上にある切り替えボタンを使用します。

## チャットセッションを保存およびエクスポートする

チャットセッションを保存して重要な会話を残したり、後で類似のタスクに再利用したりできます。

### チャットセッションをJSONファイルとしてエクスポートする

チャットセッションをエクスポートして、後で参照できるように保存したり、他の人と共有したりできます。チャットセッションをエクスポートすると、そのセッションのすべてのプロンプトと応答を含むJSONファイルが作成されます。

チャットセッションをエクスポートするには、次の手順に従います。

1. Chat viewで、エクスポートするチャットセッションを開きます。

1. コマンドパレット(`kb(workbench.action.showCommands)`)から**Chat: Export Chat...**コマンドを実行します。

1. JSONファイルを保存する場所を選択します。

または、メッセージを右クリックして**Copy**を選択すると、個々のプロンプトや応答をクリップボードにコピーできます。チャットセッション全体をMarkdown形式でコピーするには、Chat viewを右クリックして**Copy All**を選択します。

### チャットセッションを再利用可能なプロンプトとして保存する

チャットセッションを[再利用可能なプロンプト](/docs/copilot/customization/prompt-files.md)として保存し、類似のタスクに再利用できます。

チャットセッションを再利用可能なプロンプトとして保存するには、次の手順に従います。

1. Chat viewで、保存するチャットセッションを開きます。

1. チャット入力ボックスに`/savePrompt`と入力し、`Enter`を押します。

    このコマンドは、現在のチャット会話を一般化して再利用可能なプロンプトにした`.prompt.md`ファイルを作成します。必要に応じて、プロンプトファイルにはプレースホルダーが含まれます。

1. 生成されたプロンプトファイルを確認し、必要に応じて編集してから、ワークスペースに保存します。

## コンテキスト分離されたサブエージェント

サブエージェントを使用すると、チャットセッション内で、分離された自律エージェントにタスクを委任できます。サブエージェントはメインのチャットセッションとは独立して動作し、独自のコンテキストウィンドウを持ちます。これは、調査や分析などの複雑な複数ステップのタスクで、コンテキスト管理を最適化するのに役立ちます。

サブエージェントは非同期またはバックグラウンドでは実行されませんが、ユーザーからのフィードバックのために停止せず、自律的に動作します。サブエージェントがタスクを完了すると、最終結果のみをメインのチャットセッションに返し、メインのコンテキストウィンドウを主要な会話に集中させたままにします。

サブエージェントは同じエージェントを使用し、他のサブエージェントを作成することを除き、メインのチャットセッションで利用できるのと同じツールにアクセスできます。また、メインのチャットセッションと同じAIモデルを使用します。

### サブエージェントを呼び出す

プロンプトでサブエージェントを呼び出すには、次の手順に従います。

1. ツールピッカーで`runSubagent`ツールを有効にします。

    [カスタムプロンプトファイル](/docs/copilot/customization/prompt-files.md)または[カスタムエージェント](/docs/copilot/customization/custom-agents.md)を使用している場合は、フロントマターの`tools`プロパティに`runSubagent`を指定してください。

1. チャットプロンプトで、サブエージェントを使ってタスクを実行するよう依頼します。

    次の例は、サブエージェントを呼び出す方法を示しています。

    * `サブエージェントを使ってWebアプリケーションに最適な認証方法を調査してください。結果を要約してください。`
    * `#runSubagentを実行し、読み取り専用ツールを使ってユーザーのタスクを包括的に調査してください。計画を作成するのに十分なコンテキストがあると80%の確信に達したら調査を停止してください。このコンテキストを返してください。`

#### サブエージェントでカスタムエージェントを使用する(実験的)

既定では、サブエージェントはメインのチャットセッションからエージェントを継承します。サブエージェントが別の組み込みエージェントまたはカスタムエージェントを使用するように構成できます。たとえば、開発タスクの一部として調査タスクを実行したい場合は、調査エージェントを使用するサブエージェントで調査タスクを開始できます。

特定のエージェントでサブエージェントを実行するには、次の手順に従います。

1. `setting(chat.customAgentInSubagent.enabled)`設定で、サブエージェントでのカスタムエージェントのサポートを有効にします。

1. カスタムエージェントの`infer`プロパティが`false`に設定されていないことを確認します。`false`にすると、そのエージェントはサブエージェントで使用できなくなります。

1. サブエージェントとして使用可能なエージェントをAIに尋ねます。カスタムエージェントが一覧に表示されるはずです。

    ```prompt
    使用できるサブエージェントはどれですか?
    ```

1. サブエージェントにカスタムまたは組み込みエージェントを使用するようAIに指示します。例:

    * `このプロジェクトに最適なauth方法を調査するために、researchエージェントをサブエージェントとして実行してください。`
    * `サブエージェントでplanエージェントを使ってmyfeatureの実装計画を作成してください。その後、計画をplans/myfeature.plan.mdに保存してください。`

> [!NOTE]
> カスタムエージェントがサブエージェントとして使用されないようにするには、`*.agent.md`ファイルでメタデータプロパティ`infer`を`false`に設定します。

## チャットセッション内でプロンプト間を移動する

チャットセッション内でプロンプト間を移動するには、次のキーボードショートカットを使用します。

* `kb(workbench.action.chat.previousUserPrompt)`: チャットセッション内の前のプロンプトに移動します。
* `kb(workbench.action.chat.nextUserPrompt)`: チャットセッション内の次のプロンプトに移動します。
* `kb(workbench.action.chat.previousCodeBlock)`: チャットセッション内の前のコードブロックに移動します。
* `kb(workbench.action.chat.nextCodeBlock)`: チャットセッション内の次のコードブロックに移動します。

## チャットセッション管理のヒント

チャットセッションを効果的に活用するために、次のヒントを参考にしてください。

* **トピックごとに新しいセッションを開始する**: 無関係な会話からコンテキストを引き継がないように、新しいチャットセッションを開始します。これにより、より関連性の高い応答を得やすくなります。

* **エディタータブで横並び比較を行う**: 複数のチャットセッションをエディタータブとして開き、異なるアプローチや解決策を横並びで比較します。

* **マルチモニターでは別ウィンドウを使用する**: セカンダリモニターでチャットを別ウィンドウとして開き、メインウィンドウでコード作業をしている間も表示したままにします。

* **リモートエージェントでバックグラウンドタスクを実行する**: リモートのコーディングエージェントを使ってバックグラウンドでAIタスクを実行し、VS Codeでの作業を続けます。

* **対話的なエージェントセッション**: リアルタイムの入力とフィードバックが必要な対話的タスクでは、ローカルのエージェントセッションを使用します。

## 関連リソース

* [VS Codeのチャットを使い始める](/docs/copilot/chat/copilot-chat.md)
* [チェックポイントで変更を元に戻す](/docs/copilot/chat/chat-checkpoints.md)
